# フィルターデッキと詰め込み学習

<!-- toc -->

Ankiで通常のデッキを学習する場合、表示されるカードの数は限られています。Ankiが忘れそうだと考えるカードや、新しいカードの1日の制限です。これは一般的に有用で、必要以上に学習時間を費やさないようにします。しかし、テストのために復習する必要がある場合や、特定の教材に集中したい場合など、これらの通常の制限を超えることが有用な場合もあります。これを可能にするために、Ankiは「フィルターデッキ」と呼ばれる異なるタイプのデッキを提供しています。

フィルターデッキは多くの可能性を提供します。カードのプレビュー、テスト前の詰め込み学習、特定のタグの学習、特定の並べ替え順でのバックログのキャッチアップ、予定より早い復習、その日の失敗カードの確認などに使用できます。

## カスタム学習

フィルターデッキを作成する最も簡単な方法は、デッキをクリックしたときに画面の下部に表示されるカスタム学習ボタンを使用することです。これは、その日に失敗したカードの復習など、一般的なタスクのための便利なプリセットフィルターを提供します。これにより、「カスタム学習セッション」と呼ばれるフィルターデッキが作成され、自動的に開かれます。

既存の「カスタム学習セッション」デッキが存在する場合、新しいデッキが作成される前に空になります。カスタム学習デッキを保持したい場合は、デッキリストから名前を変更できます。

各オプションの概要は次のとおりです：

**今日の新しいカードの制限を増やす**\
現在学習しているデッキに新しいカードを追加します。他のオプションとは異なり、新しいフィルターデッキを作成するのではなく、既存のデッキを変更します。

**今日の復習カードの制限を増やす**\
今日の復習カードが日々の復習制限のためにすべて表示されなかった場合、このオプションを使用すると、さらに多くのカードを表示できます。新しいカードのオプションと同様に、既存のデッキを変更します。

**忘れたカードを復習する**\
指定した日数内に「もう一度（1）」と回答したすべてのカードを表示します。

**先取り復習**\
近い将来に期限が来るカードを表示します（指定した日数内）。これは、休暇前に古いカードを処理するのに役立ちますが、最近学習したカードには役立ちません。詳細については、以下の[先取り復習](#先取り復習)セクションを参照してください。

**新しいカードをプレビューする**\
最近追加したカードを表示し、回答しても復習カードに変換しません。

**カードの状態やタグで学習する**\
現在のデッキから特定の数のカードを選択して学習します。新しいカードのみ、期限のあるカードのみ、またはすべてのカードを選択できます。「タグを選択」をクリックした後、タグで選択したカードを制限することもできます。すべてのカードを表示したい場合（例えば、大きなテストの前に学習するため）、デッキ内のカードの数よりも多くのカード数を設定できます。

## ホームデッキ

カードがフィルターデッキに移動されると、元のデッキへのリンクが保持されます。その元のデッキはカードの「ホームデッキ」と呼ばれます。

カードはフィルターデッキで学習された後、自動的にホームデッキに戻ります。これは、設定に応じて、単一の復習後または複数の復習後に行われます。

すべてのカードを一度にホームデッキに戻すことも可能です：

- 学習概要の「空にする」ボタンは、フィルターデッキ内のすべてのカードをホームデッキに戻しますが、空のフィルターデッキは削除しません。これは、後で再構築ボタンを使用して再度フィルターデッキを埋めたい場合に便利です。

- フィルターデッキを削除すると、「空にする」と同じことが行われますが、空になったデッキもデッキリストから削除されます。フィルターデッキを削除してもカードは削除されません。

古いスケジューラでは、カードがまだ習得中の状態でフィルターデッキを作成、再構築、空にする、または削除すると、それらのカードは新しいカードに戻されます。再習得中の失敗した復習の場合、残りの再学習ステップはスキップされます。これは[v2スケジューラ](https://shigeyukey.github.io/Anki-faqs-jp/the-anki-2.1-scheduler.html)で修正され、カードはリセットされなくなりました。

## 手動での作成

上級ユーザーは、プリセットフィルターに頼らずに、任意の検索文字列（または「フィルター」）を使用してフィルターデッキを作成できます。手動でフィルターデッキを作成するには、ツールメニューから「フィルターデッキの作成」を選択します。

ビルドボタンをクリックすると、Ankiは指定した設定に一致するカードを見つけ、それらを既存のデッキから新しいフィルターデッキに一時的に移動して学習します。

同じフィルターオプションを使用して再度カードを取得したい場合（例えば、特定のタグを持つすべてのカードを毎日学習したい場合）、デッキの概要画面の下部にある再構築ボタンを使用できます。

**検索**エリアは、Ankiが収集するカードを制御します。ブラウザで可能なすべての検索は、フィルターデッキでも可能です。タグの制限、特定の回数忘れたカードの検索などです。さまざまな可能性については、マニュアルの[検索](searching.md)セクションを参照してください。

フィルターデッキは、保留中、埋められた、または別のフィルターデッキに既に含まれているカードを取り込むことはできません。また、v1スケジューラを使用している場合、（再）習得中のカードも含まれません。このため、ブラウザでの検索では、フィルターデッキに含まれないカードが表示されることがあります。

**制限**オプションは、デッキに収集されるカードの数を制御します。選択した順序は、カードが収集される順序と復習される順序の両方を制御します。例えば、「最も多くの失敗」と制限を20に設定すると、Ankiは最も多く失敗した20枚のカードのみを表示します。

**2番目のフィルターを有効にする**オプションを使用すると、2つの異なる検索で構成されるフィルターデッキを作成できます。例えば、1つの順序で期限のあるカードを含め、別の順序で少量の新しいカードを含めることができます。

## 順序

「カードの選択基準」オプションは、カードが表示される順序を制御します。選択したカードの最大数がフィルター条件に一致するカードの数よりも少ない場合、Ankiはこのソートされたリストの最後のカードから除外します。

**最も古く見たものから**\
最も長い間復習で見ていないカードを最初に表示します。

**ランダム**\
フィルター条件に一致するすべてのカードの順序をランダムにします（特定の順序を使用しません）。

**インターバルの増加**\
最も短いインターバルのカードを最初に表示します。

**インターバルの降順**\
最も長いインターバルのカードを最初に表示します。

**最も多くの失敗**\
最も多く失敗したカードを最初に表示します。

**追加順**\
最初に追加したカードを表示します（つまり、作成日が最も早いカード）。

**期限順**\
最も早い期限のカードを最初に表示します。

**最新の追加順**\
デッキに最近追加したカードを最初に表示します。
（これは「追加順」の逆です。）

**相対的な期限超過**\
忘れている可能性が最も高いカードを最初に表示します。これは、大量のバックログがあり、それを処理するのに時間がかかる場合に、忘れる可能性を減らしたい場合に役立ちます。

SM-2スケジューラを使用する場合、期限超過はカードがどれだけ期限を過ぎているかと、その間隔の長さを比較して決定されます。例えば、現在の間隔が5日で2日遅れているカードは、現在の間隔が10日で3日遅れているカードよりも先に表示されます。

FSRSを使用する場合、期限超過は各カードの再取得可能性とデッキプリセットでの望ましい保持率に基づいて計算されます。

## ステップと戻る

ステップの仕組みについては、[学習](studying.md#学習-再学習カード)セクションを参照してください。

デフォルトでは、Ankiはカードのホームデッキのステップを使用します。新しいカードが通常習得中に2回復習される場合、フィルターデッキで学習する場合も同じことが起こります。

カードは（再）学習が完了するとホームデッキに戻ります。したがって、3つの学習ステップがある場合、新しいカードは「良い」を3回押すか、「簡単」を1回押すとホームデッキに戻ります。

**v1およびv2スケジューラ**

v1スケジューラでは、**カスタムステップ**オプションを使用してホームデッキのステップを上書きし、独自のステップを提供できます。提供されたステップは、習得中のカード、失敗した復習、および予定より早い復習に適用されます。ただし、[v2スケジューラ](https://shigeyukey.github.io/Anki-faqs-jp/the-anki-2.1-scheduler.html)からは、フィルターデッキは[カスタムステップをサポートしなくなりました](https://forums.ankiweb.net/t/filtered-deck-interval-problem/11834/8)ので注意してください。

**v3スケジューラ**

[v3スケジューラ](https://shigeyukey.github.io/Anki-faqs-jp/the-2021-scheduler.html)では、再スケジューリングが無効になっているフィルターデッキには4つのボタンが表示されます。提供された遅延は「もう一度」ボタンに適用され、「難しい/良い」は提供された遅延の1.5倍と2倍を使用します。「簡単」はカードを削除します。

## カウント

フィルターデッキでは、既に期限が来ている復習は通常通り復習カウントに表示されます。学習カードと期限が来ていない復習は、基礎となる実装の仕組みにより、新しいカードのカウントに含まれます。ただし、期限が来ていない復習は新しいカードのようにスケジュールされません。Ankiは、復習時に通常の期限にどれだけ近かったかを考慮する特別なアルゴリズムを使用します。

## 期限のある復習

フィルターデッキに期限のある復習が含まれている場合、それらは元のデッキで表示されるように表示されます。画面下部の復習カードカウントに表示され、覚えていたかどうかの4つの選択肢があります。正解すると、カードはホームデッキに戻され、次の遅延はホームデッキの設定を使用して調整されます。カードを忘れた場合は、ホームデッキで定義された再学習ステップに従って表示されます。

## 先取り復習

検索に期限が来ていないカードが含まれている場合、Ankiはその復習を前もって表示します。

Ankiはこれらの復習に対して、どれだけ早く復習しているかを考慮する特別なアルゴリズムを使用します。カードがほぼ期限に近い場合、それらは期限通りに復習した場合と同様の新しい遅延が与えられます。しかし、カードが予定された直後に復習された場合、それらの新しい遅延は以前の遅延と同様になります。この計算はスライディングスケールで機能します。

カードが予定された直後に復習することはスケジューリングにほとんど影響を与えないため（例えば、1日間隔で明日が期限のカードは早めに復習しても明日が期限のままです）、**「先取り復習」カスタムスタディ設定は繰り返し使用するのに適していません**。旅行前に1週間分のカードを処理するために使用すると、成熟したカードは将来に再スケジュールされ、新しいカードは小さな間隔のままになります。なぜなら、それらを再スケジュールするには十分に知られていないからです。次の日に再び先取り復習を行うと、同じ新しいカードを再び処理することになり、ほとんど利益がありません。

早期復習は復習数ではなく新しいカード数に含まれ、ホームデッキで定義された再学習ステップの数に従って表示されます（カスタムステップを提供していない場合）。これは、ホームデッキで再学習ステップの数をカスタマイズしている場合、期限が来ていないカードが複数回表示される可能性があることを意味します。

複数のステップがある場合、Ankiは次の遅延を決定する際に最初の回答のみを考慮し、通常のデッキでの再学習と同様に、「良い」と「簡単」はステップの変更のみが異なり、結果の遅延は異なりません。

## 再スケジューリング

デフォルトでは、Ankiはフィルターデッキでのパフォーマンスに基づいてスケジュールを変更し、カードをホームデッキに戻します。この動作を変更する**回答に基づいてカードを再スケジュールする**オプションがあります。

[v2スケジューラ](https://shigeyukey.github.io/Anki-faqs-jp/the-anki-2.1-scheduler.html)からは、再スケジューリングが無効になっている場合、カードは単純な「プレビューモード」で表示され、元のデッキに戻るときには、開始時と全く同じ状態で戻ります。

v1スケジューラでは、カードは通常の表示に近い形で提示されましたが、カードを学習することで副作用が生じ、新しいカードの元の位置が失われました。

## キャッチアップ

フィルターデッキは、復習が遅れているときに追いつくのに役立ちます。あるAnkiユーザーは、フィルターデッキを使って追いつく方法を次のように説明しています：

    私はフィルター付きサブデッキで800枚のカードのバックログを処理しました。非常にうまくいきました。

    Just Dueフィルター: "is:due prop:due>-7"

    Over Dueフィルター: "is:due prop:due<=-7"

    Just Dueデッキには、過去1週間に期限が来たカードが含まれます。これは、定期的に期限が来るカードを含むため、毎日学習するべきデッキです。これにより、バックログがないかのように学習できます。

    Over Dueデッキには、期限内に学習しなかったカードが含まれます。これらのカードは新しいカードと同じように学習できます。これらのカードは通常のカードに戻るため、Just Dueデッキを管理している限り、期限切れのカードの数は増えません。

    どれくらいの時間がかかるかは、定期的に期限が来るカードに加えて、毎日どれだけの期限切れカードを学習するかによります。気が向いたときに一気に学習することもできますし、新しいカードと同じように1日に特定の数を学習することもできます。あなた次第です。